(this["webpackJsonptailwindreact-app"]=this["webpackJsonptailwindreact-app"]||[]).push([[0],{35:function(e,t,n){e.exports=n(80)},7:function(module,exports){var _this=this;module.exports={eval:function _eval(arg,callback){var self=_this,jsString=arg,isError=!1;try{eval(jsString)}catch(e){isError=!0}callback&&callback(jsString,isError)}}},75:function(e,t){},79:function(e,t,n){},80:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),c=n(34),s=n.n(c),l=n(2),r=n(3),i=n(6),u=n(4),h=n(5),d=n(1),p=n(7),m=n.n(p),f=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(i.a)(this,Object(u.a)(t).call(this,e))).state={code:"",log:[]},n.handleChange=n.handleChange.bind(Object(d.a)(n)),n.onKeyPressed=n.onKeyPressed.bind(Object(d.a)(n)),n.addToLog=n.addToLog.bind(Object(d.a)(n)),n.onLogClick=n.onLogClick.bind(Object(d.a)(n)),n.onChannelClick=n.onChannelClick.bind(Object(d.a)(n)),n.handleSubmit=n.handleSubmit.bind(Object(d.a)(n)),n}return Object(h.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.props.log.on("append".concat(this.props.index),(function(t){e.setState({log:e.state.log.concat(t)}),m.a.eval("".concat(t.code,".out(o").concat(e.props.index,")"))})),this.props.history.length>0&&m.a.eval("".concat(this.props.history[this.props.history.length-1].code,".out(o").concat(this.props.index,")")),setTimeout((function(){e.codeInput.focus(),console.log("focusing input")}),1e3)}},{key:"componentDidUpdate",value:function(e,t){console.log("update"),this.messagesEnd.scrollIntoView({behavior:"smooth"})}},{key:"handleChange",value:function(e){this.setState({code:e.target.value})}},{key:"addToLog",value:function(){var e={user:this.props.user,code:this.state.code,date:Date.now(),channel:this.props.index,color:this.props.color};this.setState({log:this.state.log.concat(e)}),m.a.eval("".concat(e.code,".out(o").concat(this.props.index,")")),this.props.log.appendToLog(e)}},{key:"onLogClick",value:function(e,t){this.setState({code:e.code})}},{key:"onChannelClick",value:function(){var e=this;console.log("channel click"),setTimeout((function(){return e.codeInput.focus()}),100)}},{key:"onKeyPressed",value:function(e){}},{key:"handleSubmit",value:function(e){e.preventDefault(),this.addToLog()}},{key:"render",value:function(){var e=this;return o.a.createElement("div",{onKeyDown:this.onKeyPressed,onMouseDown:this.onChannelClick,className:"w-1/3 h-full flex"},o.a.createElement("div",{className:"h-56 p-4 pt-8 bg-black self-end w-full break-all"},o.a.createElement("div",{className:"h-40 overflow-y-auto"},this.props.history.map((function(t,n){return o.a.createElement("div",{className:"text-sm",key:n,onMouseDown:e.onLogClick.bind(null,t)},o.a.createElement("span",{style:{color:t.color}},t.user,": "),t.code)})),this.state.log.map((function(t,n){return o.a.createElement("div",{className:"text-sm",key:n,onMouseDown:e.onLogClick.bind(null,t)},o.a.createElement("span",{style:{color:t.color}},t.user,": "),t.code)})),o.a.createElement("div",{style:{float:"left",clear:"both"},ref:function(t){e.messagesEnd=t}})),o.a.createElement("div",{className:"flex"},o.a.createElement("span",{style:{color:this.props.color},className:"mr-3"}," ",this.props.user,":"),o.a.createElement("form",{onSubmit:this.handleSubmit},o.a.createElement("input",{autoFocus:!0,ref:function(t){e.codeInput=t},className:"bg-black font-mono",type:"text",value:this.state.code,placeholder:"Type code here and press <Enter>",onChange:this.handleChange})))))}}]),t}(o.a.Component),g=(n(40),function(e){function t(){return Object(l.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(r.a)(t,[{key:"componentDidUpdate",value:function(e,t){console.log("update"),this.userInput.focus()}},{key:"componentDidMount",value:function(e,t){console.log("update"),this.userInput.focus()}},{key:"render",value:function(){var e=this;return o.a.createElement("div",{className:"fixed w-full h-full flex items-center justify-center h-screen"},o.a.createElement("div",{className:"fixed bg-black p-16 w-2/3 "},o.a.createElement("div",null,"WELCOME TO PIXELJAM"),o.a.createElement("div",null,"This is a collaborative REPL for hydra synth."),o.a.createElement("div",null,"There are three channels or buffers that are changed by writing code in the text boxes beneath them."),o.a.createElement("div",null,"Pressing 'Enter' executes the code."),o.a.createElement("form",{onSubmit:this.props.closeIntro},o.a.createElement("div",null,"To join, enter your name:"),o.a.createElement("input",{autoFocus:!0,style:{borderColor:this.props.color},ref:function(t){e.userInput=t},className:"appearance-none border-solid border-2 border-white bg-black",type:"text",value:this.props.user,onChange:this.props.updateUser}),o.a.createElement("div",null,o.a.createElement("input",{type:"submit",value:"START"})))))}}]),t}(o.a.Component)),v=n(50),b=function(e){function t(){var e;Object(l.a)(this,t),e=Object(i.a)(this,Object(u.a)(t).call(this));var n="https://".concat(window.location.hostname,":8080");e.signaller=v(n);var a=Object(d.a)(e);return e.signaller.on("ready",(function(e){console.log("received message",e)})),e.signaller.on("log history",(function(e){a.emit("log history",e)})),e.signaller.on("append",(function(e){console.log("received APPEND",e),a.emit("append".concat(e.channel),e)})),e}return Object(h.a)(t,e),Object(r.a)(t,[{key:"appendToLog",value:function(e){console.log("append",e),this.signaller.emit("append",e)}}]),t}(n(78).EventEmitter),y=function(e){function t(){var e;return Object(l.a)(this,t),(e=Object(i.a)(this,Object(u.a)(t).call(this))).dome=null,e}return Object(h.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){this.hydraCanvas.width=window.innerWidth,this.hydraCanvas.height=window.innerHeight,this.hydra=new window.Hydra({canvas:this.hydraCanvas}),m.a.eval("render()"),this.props.channels.forEach((function(e,t){e.length>0&&m.a.eval("".concat(e[e.length-1].code,".out(o").concat(t,")"))}))}},{key:"componentDidUpdate",value:function(e,t,n){}},{key:"render",value:function(){var e=this;return o.a.createElement("canvas",{className:"fixed pin-t pin-l w-full h-full",style:{zIndex:0},ref:function(t){return e.hydraCanvas=t}})}}]),t}(o.a.Component),E=function(e){function t(){var e,n;Object(l.a)(this,t);for(var a=arguments.length,o=new Array(a),c=0;c<a;c++)o[c]=arguments[c];return(n=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(o)))).state={user:"",showLanding:!0,color:"rgb(".concat(255*Math.random(),", ").concat(255*Math.random(),", ").concat(255*Math.random(),")"),channels:[[],[],[]]},n.componentWillMount=function(){n.log=new b,n.log.on("log history",(function(e){var t=n.state.channels.map((function(t,n){return e.filter((function(e){return e.channel===n})).reverse()}));console.log("LOG HISTORY",t),n.setState({channels:t}),t.forEach((function(e,t){e.length>0&&m.a.eval("".concat(e[e.length-1].code,".out(o").concat(t,")"))}))}))},n.closeIntro=function(){n.setState({showLanding:!1})},n.updateUser=function(e){n.setState({user:e.target.value})},n}return Object(h.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this;console.log("log is",this.log);var t=null;return t=this.state.showLanding?o.a.createElement(g,{user:this.state.user,closeIntro:this.closeIntro,updateUser:this.updateUser,color:this.state.color}):o.a.createElement("div",{className:"flex fixed h-full bottom-0 w-full"},this.state.channels.map((function(t,n){return o.a.createElement(f,{history:t,key:n,index:n,user:e.state.user,color:e.state.color,log:e.log})}))),o.a.createElement("div",{className:"main bg-black text-white font-mono h-screen w-screen"},o.a.createElement(y,{channels:this.state.channels}),t)}}]),t}(o.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n(79);s.a.render(o.a.createElement(E,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[35,1,2]]]);
//# sourceMappingURL=main.5545b31b.chunk.js.map